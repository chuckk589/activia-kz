{"version":3,"sources":["webpack:///./vue/views/Lottery.vue?a485","webpack:///./vue/views/Lottery.vue?514a","webpack:///vue/views/Lottery.vue","webpack:///./vue/views/Lottery.vue?410a","webpack:///./vue/views/Lottery.vue","webpack:///./vue/components/table/CExtendedModal.vue?b697","webpack:///vue/components/table/CExtendedModal.vue","webpack:///./vue/components/table/CExtendedModal.vue?3959","webpack:///./vue/components/table/CExtendedModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","modalConfig","show","data","on","$event","closeModalHandler","scopedSlots","_u","key","fn","path","_e","proxy","staticStyle","items","fields","rowClick","staticClass","getCurrentItems","_v","newLotteryInit","mode","ref","item","changeLotteryStatus","deleteLottery","Boolean","_toggled","collapseDuration","_l","winner","index","primary","_s","confirmed","notified","fancyId","prize","credentials","phoneFormatter","phone","city","viewCheck","checkPath","sendNotify","approveWinner","staticRenderFns","name","components","CExtendedModal","winners","label","filter","sorter","mounted","method","url","methods","footer","header","type","a","rowName","then","select","value","s","status","cur","sum","computed","component","vis","mData","closeModal","_t","field","$scopedSlots","boolSelect","$set","model","callback","$$v","expression","props"],"mappings":"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","file":"js/chunk-55baa675.d2951b8e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lottery.vue?vue&type=style&index=0&id=752f262e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('CExtendedModal',{attrs:{\"vis\":_vm.modalConfig.show,\"mData\":_vm.modalConfig.data},on:{\"modal-closed\":function($event){return _vm.closeModalHandler()}},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [(_vm.modalConfig.data.path)?_c('CImg',{attrs:{\"fluidGrow\":\"\",\"src\":_vm.modalConfig.data.path}}):_vm._e()]},proxy:true}])}),_c('CDataTable',{staticStyle:{\"user-select\":\"none\"},attrs:{\"sorter\":\"\",\"hover\":\"\",\"items\":_vm.items,\"fields\":_vm.fields,\"column-filter\":\"\"},on:{\"row-clicked\":_vm.rowClick},scopedSlots:_vm._u([{key:\"over-table\",fn:function(){return [_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('CLink',{staticClass:\"btn-square btn btn-primary btn-sm\",staticStyle:{\"margin-right\":\"3px\"},attrs:{\"href\":_vm.getCurrentItems(),\"download\":\"table-data.csv\",\"target\":\"_blank\"}},[_vm._v(\"Скачать (.csv)\")]),_c('CButton',{staticClass:\"btn btn-primary \",attrs:{\"shape\":\"square\",\"size\":\"sm\"},on:{\"click\":_vm.newLotteryInit}},[_vm._v(\" Новый розыгрыш\")]),_c('div',{staticStyle:{\"margin-left\":\"auto\",\"display\":\"flex\",\"align-items\":\"center\"}},[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_vm._v(\"Режим для записи\")]),_c('CSwitch',{attrs:{\"color\":\"primary\",\"size\":\"sm\",\"checked\":_vm.mode},on:{\"update:checked\":function($event){_vm.mode=$event}}})],1)],1)]},proxy:true},{key:\"action\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_c('CDropdown',{staticClass:\"m-2\",attrs:{\"addTogglerClasses\":\"btn-square\",\"size\":\"sm\",\"toggler-text\":\"Действия\",\"color\":\"primary\"}},[_c('CDropdownItem',{on:{\"click\":function($event){return _vm.changeLotteryStatus(item)}}},[_vm._v(\"Изменить\")]),_c('CDropdownItem',{on:{\"click\":function($event){return _vm.deleteLottery(item)}}},[_vm._v(\"Удалить\")])],1)],1)]}},{key:\"details\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('CCollapse',{staticClass:\"subtable\",attrs:{\"show\":Boolean(item._toggled),\"duration\":_vm.collapseDuration}},[_c('CRow',[_c('CCol',[_vm._v(\"Основной\")]),_c('CCol',[_vm._v(\"Подтвержден\")]),_c('CCol',[_vm._v(\"Уведомлен\")]),_c('CCol',[_vm._v(\"Id чека\")]),_c('CCol',[_vm._v(\"Id сертификата\")]),_c('CCol',[_vm._v(\"Имя\")]),_c('CCol',[_vm._v(\"Номер\")]),_c('CCol',[_vm._v(\"Город\")]),_c('CCol',[_vm._v(\"Чек\")]),_c('CCol')],1),_vm._l((item.winners),function(winner,index){return (!_vm.mode || winner.primary)?_c('CRow',{key:index},[_c('CCol',[_vm._v(_vm._s(winner.primary ? \"Да\" : \"Нет\"))]),_c('CCol',[_vm._v(_vm._s(winner.confirmed ? \"Да\" : \"Нет\"))]),_c('CCol',[_vm._v(_vm._s(winner.notified ? \"Да\" : \"Нет\"))]),_c('CCol',[_vm._v(_vm._s(winner.fancyId))]),_c('CCol',[_vm._v(_vm._s(winner.prize))]),_c('CCol',[_vm._v(_vm._s(winner.credentials))]),_c('CCol',[_vm._v(_vm._s(_vm.phoneFormatter(winner.phone)))]),_c('CCol',[_vm._v(_vm._s(winner.city))]),_c('CCol',[_c('CButton',{attrs:{\"shape\":\"square\",\"size\":\"sm\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.viewCheck(winner.checkPath)}}},[_c('CIcon',{attrs:{\"size\":\"sm\",\"name\":\"cilImage\"}})],1)],1),_c('CCol',[_c('CDropdown',{staticClass:\"btn-square m-2\",attrs:{\"addTogglerClasses\":\"btn-square\",\"toggler-text\":\"Действия\",\"size\":\"sm\",\"color\":\"primary\"}},[_c('CDropdownItem',{on:{\"click\":function($event){return _vm.sendNotify(winner)}}},[_vm._v(\"Уведомить о выигрыше\")]),_c('CDropdownItem',{on:{\"click\":function($event){return _vm.approveWinner(winner)}}},[_vm._v(\"Подтвердить\")])],1)],1)],1):_vm._e()})],2)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <CExtendedModal @modal-closed=\"closeModalHandler()\" :vis=\"modalConfig.show\" :mData=\"modalConfig.data\">\n      <template #content>\n        <CImg v-if=\"modalConfig.data.path\" fluidGrow :src=\"modalConfig.data.path\"></CImg>\n      </template>\n    </CExtendedModal>\n    <CDataTable style=\"user-select: none;\" sorter hover :items=\"items\" :fields=\"fields\" column-filter @row-clicked=\"rowClick\">\n      <template #over-table>\n        <div style=\"display:flex;\">\n          <CLink class=\"btn-square btn btn-primary btn-sm\" :href=\"getCurrentItems()\" style=\"margin-right:3px;\"\n            download=\"table-data.csv\" target=\"_blank\">Скачать\n            (.csv)</CLink>\n          <CButton shape=\"square\" size=\"sm\" class=\"btn btn-primary \" @click=\"newLotteryInit\">\n            Новый розыгрыш</CButton>\n          <div style=\"margin-left:auto; display: flex; align-items: center;\">\n            <span style=\"margin-right:5px;\">Режим для записи</span>\n            <CSwitch color=\"primary\" size=\"sm\" :checked.sync=\"mode\" />\n          </div>\n        </div>\n      </template>\n      <template #action=\"{ item }\">\n        <td>\n          <CDropdown addTogglerClasses=\"btn-square\" size=\"sm\" toggler-text=\"Действия\" class=\"m-2\" color=\"primary\">\n            <CDropdownItem @click=\"changeLotteryStatus(item)\">Изменить</CDropdownItem>\n            <CDropdownItem @click=\"deleteLottery(item)\">Удалить</CDropdownItem>\n          </CDropdown>\n        </td>\n      </template>\n      <template #details=\"{ item }\">\n        <CCollapse class=\"subtable\" :show=\"Boolean(item._toggled)\" :duration=\"collapseDuration\">\n          <CRow>\n            <CCol>Основной</CCol>\n            <CCol>Подтвержден</CCol>\n            <CCol>Уведомлен</CCol>\n            <CCol>Id чека</CCol>\n            <CCol>Id сертификата</CCol>\n            <CCol>Имя</CCol>\n            <CCol>Номер</CCol>\n            <CCol>Город</CCol>\n            <CCol>Чек</CCol>\n            <CCol></CCol>\n          </CRow>\n          <CRow v-for=\"(winner, index) in item.winners\" v-if=\"!mode || winner.primary\" :key=\"index\">\n            <CCol>{{ winner.primary ? \"Да\" : \"Нет\" }}</CCol>\n            <CCol>{{ winner.confirmed ? \"Да\" : \"Нет\" }}</CCol>\n            <CCol>{{ winner.notified ? \"Да\" : \"Нет\" }}</CCol>\n            <CCol>{{ winner.fancyId }}</CCol>\n            <CCol>{{ winner.prize }}</CCol>\n            <CCol>{{ winner.credentials }}</CCol>\n            <CCol>{{ phoneFormatter(winner.phone) }}</CCol>\n            <CCol>{{ winner.city }}</CCol>\n            <CCol>\n              <CButton shape=\"square\" size=\"sm\" @click=\"viewCheck(winner.checkPath)\" color=\"primary\">\n                <CIcon size=\"sm\" name=\"cilImage\" />\n              </CButton>\n            </CCol>\n            <CCol>\n              <CDropdown addTogglerClasses=\"btn-square\" toggler-text=\"Действия\" class=\"btn-square m-2\" size=\"sm\"\n                color=\"primary\">\n                <CDropdownItem @click=\"sendNotify(winner)\">Уведомить о выигрыше</CDropdownItem>\n                <CDropdownItem @click=\"approveWinner(winner)\">Подтвердить</CDropdownItem>\n              </CDropdown>\n            </CCol>\n          </CRow>\n        </CCollapse>\n      </template>\n    </CDataTable>\n  </div>\n\n</template>\n\n\n<script>\nimport CExtendedModal from '../components/table/CExtendedModal.vue'\n\nexport default {\n  name: 'Lottery',\n  components: {\n    CExtendedModal\n  },\n  data() {\n    return {\n      mode: false,\n      collapseDuration: 0,\n      modalConfig: {\n        show: false,\n        data: {},\n      },\n      items: [{ winners: [] }],\n      fields: [\n        { key: 'id', label: 'Id Розыгрыша' },\n        { key: 'start', label: 'Начало' },\n        { key: 'end', label: 'Конец' },\n        { key: 'status', label: 'Статус' },\n        { key: 'prize', label: 'Приз' },\n        { key: 'primaryWinners', label: 'Основные победители' },\n        { key: 'reserveWinners', label: 'Резервные победители' },\n        { key: 'createdAt', label: 'Дата создания' },\n        { key: 'action', label: '', filter: false, sorter: false }\n      ]\n    }\n  },\n  mounted() {\n    this.$http({ method: 'GET', url: `/v1/lottery/` }).then(e => {\n      this.items = e.data\n    })\n  },\n  methods: {\n    phoneFormatter(phone) {\n      return phone.slice(0, -6) + 'XXXX' + phone.slice(-2)\n    },\n    viewCheck(path) {\n      this.modalConfig.data = {\n        path: path,\n        footer: 'Ок',\n        header: 'Просмотр чека',\n        type: 'viewCheck'\n      }\n      this.modalConfig.show = true\n    },\n    rowClick(item, a, rowName) {\n      if (rowName !== 'details' && rowName !== 'action') {\n        item._toggled = !item._toggled\n        this.collapseDuration = 300\n        this.$nextTick(() => { this.collapseDuration = 0 })\n      }\n    },\n    sendNotify(item) {\n      this.$http({ method: 'POST', url: `/v1/winner/${item.id}/notification` }).then(e => {\n        item.notified = true\n      })\n    },\n    approveWinner(item) {\n      this.$http({\n        method: 'PUT', url: `/v1/winner/${item.id}`, data: {\n          confirmed: !item.confirmed\n        }\n      }).then(e => {\n        item.confirmed = !item.confirmed\n      })\n    },\n    newLotteryInit() {\n      this.modalConfig.data = {\n        fields: [\n          { label: 'Дата розыгрыша', key: \"start\", type: \"date\" },\n          { label: 'Конец', key: 'end', type: \"date\" },\n          { label: 'Что разыгрываем', key: \"prize\", select: this.$ctable.prizes, value: this.$ctable.prizes[0].value },\n          { label: 'Основные победители', key: \"primaryWinners\", type: \"number\" },\n          // { label: 'Запасные победители', key: \"reserveWinners\", type: \"number\" }\n        ],\n        footer: 'Создать',\n        header: 'Новый розыгрыш',\n        type: 'newLottery'\n      }\n      this.modalConfig.show = true\n    },\n    closeModalHandler() {\n      if (this.modalConfig.data.type == 'newLottery') {\n        let data = this.modalConfig.data.fields.reduce((s, c) => {\n          s[c.key] = c.value\n          return s\n        }, {})\n        data.reserveWinners = data.primaryWinners\n        this.$http({ method: 'POST', url: `/v1/lottery/`, data: data })\n          .then((r) => {\n            this.items.push(r.data)\n            this.modalConfig.show = false\n          })\n      } else if (this.modalConfig.data.type == 'editLottery') {\n        const status_id = this.modalConfig.data.fields[0].value\n        this.$http({ method: 'PUT', url: `/v1/lottery/${this.modalConfig.data.cur.id}`, data: { status: status_id } })\n          .then(() => {\n            this.modalConfig.data.cur.status = this.$ctable.lottery_statuses.find(c => c.value == status_id).label\n          })\n      } else if (this.modalConfig.data.type == 'deleteLottery') {\n        this.$http({\n          method: 'DELETE',\n          url: `/v1/lottery/${this.modalConfig.data.cur.id}`,\n        })\n          .then(() => {\n            const idx = this.items.findIndex(i => i.id == this.modalConfig.data.cur.id)\n            this.items.splice(idx, 1)\n            this.modalConfig.show = false\n          })\n      }\n    },\n    changeLotteryStatus(item) {\n      this.modalConfig.data = {\n        cur: item,\n        fields: [\n          { key: 'status', label: 'Статус', select: this.$ctable.lottery_statuses, value: this.$ctable.lottery_statuses.find(c => c.label == item.status)?.value },\n        ],\n        footer: 'Сохранить',\n        header: 'Статус розыгрыша',\n        type: 'editLottery'\n      }\n      this.modalConfig.show = true\n    },\n    deleteLottery(item) {\n      this.modalConfig.data = {\n        cur: item,\n        fields: [],\n        footer: 'Подтвердить',\n        header: 'Удалить розыгрыш?',\n        type: 'deleteLottery'\n      }\n      this.modalConfig.show = true\n    },\n    getCurrentItems(items = this.items) {\n      const cols = 'Id Розыгрыша,Дата,Приз,Основной,Подтвержден,Уведомлен,Id чека,Имя,Номер,Город,Сертификат'\n      const csvCode = 'data:text/csv;charset=utf-8,' + cols + '%0A' + encodeURIComponent(\n        items.reduce((sum, cur) => {\n          const header = `${cur.id},${cur.createdAt},${cur.prize},${cur.primary ? 'Да' : 'Нет'},${cur.confirmed ? 'Да' : 'Нет'},${cur.notified ? 'Да' : 'Нет'}`\n          cur.winners.forEach(w => {\n            sum = sum + header + `,${w.fancyId},${w.credentials},${w.phone},${w.city},${w.prize}\\n`\n          })\n          return sum\n        }, '')\n      )\n      return csvCode\n    },\n  },\n  computed: {\n\n  },\n}\n</script>\n<style scoped>\n.subtable {\n  border-top: 2px solid;\n  border-top-color: #d8dbe0;\n}\n\n.subtable .row {\n  margin: 0;\n}\n\n.subtable .row:first-child {\n  margin-bottom: 10px;\n  font-weight: bold;\n}\n\n.subtable .col {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lottery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lottery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Lottery.vue?vue&type=template&id=752f262e&scoped=true&\"\nimport script from \"./Lottery.vue?vue&type=script&lang=js&\"\nexport * from \"./Lottery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Lottery.vue?vue&type=style&index=0&id=752f262e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"752f262e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CModal',{attrs:{\"show\":_vm.vis,\"title\":_vm.mData.header},on:{\"update:show\":function($event){_vm.vis=$event}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('CButton',{attrs:{\"shape\":\"square\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(_vm._s(_vm.mData.footer))])]},proxy:true}])},[_vm._t(\"content\"),_vm._l((_vm.mData.fields),function(field,index){return [(_vm.$scopedSlots[field.label])?[_vm._t(field.label,null,{\"item\":field})]:(field.select)?_c('CSelect',{key:index,attrs:{\"label\":field.label,\"value\":field.value,\"options\":field.select == 'bool' ? _vm.boolSelect : field.select},on:{\"update:value\":function($event){return _vm.$set(field, \"value\", $event)}}}):_c('CInput',{key:index,attrs:{\"label\":field.label,\"type\":field.type},model:{value:(field.value),callback:function ($$v) {_vm.$set(field, \"value\", $$v)},expression:\"field.value\"}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <CModal :show.sync=\"vis\" :title=\"mData.header\">\n    <slot name=\"content\"></slot>\n    <template v-for=\"(field, index) in mData.fields\">\n      <template v-if=\"$scopedSlots[field.label]\">\n        <slot :name=\"field.label\" :item=\"field\" />\n      </template>\n      <CSelect v-else-if=\"field.select\" :label=\"field.label\" :value.sync=\"field.value\"\n        :options=\"field.select == 'bool' ? boolSelect : field.select\" :key=\"index\" />\n      <CInput v-else :label=\"field.label\" v-model=\"field.value\" :key=\"index\" :type=\"field.type\" />\n    </template>\n    <template #footer>\n      <CButton shape=\"square\" color=\"primary\" @click=\"closeModal()\">{{ mData.footer }}</CButton>\n    </template>\n  </CModal>\n</template>\n\n<script>\nexport default {\n  name: 'ExtendedModal',\n\n  data() {\n    return {\n      boolSelect: [{\n        value: 1,\n        label: \"Да\"\n      },\n      {\n        value: 0,\n        label: \"Нет\"\n      }]\n    }\n  },\n  props: {\n    vis: Boolean,\n    mData: Object\n  },\n  methods: {\n    closeModal() {\n      this.vis = false\n      this.$emit('modal-closed')\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CExtendedModal.vue?vue&type=template&id=25ef501a&\"\nimport script from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\nexport * from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}