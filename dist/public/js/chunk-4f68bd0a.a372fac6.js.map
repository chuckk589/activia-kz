{"version":3,"sources":["webpack:///./vue/views/Prizes.vue?57fb","webpack:///vue/views/Prizes.vue","webpack:///./vue/views/Prizes.vue?ccd8","webpack:///./vue/views/Prizes.vue","webpack:///./vue/components/table/CExtendedModal.vue?d8e2","webpack:///vue/components/table/CExtendedModal.vue","webpack:///./vue/components/table/CExtendedModal.vue?a140","webpack:///./vue/components/table/CExtendedModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","items","fields","scopedSlots","_u","key","fn","ref","item","_v","_s","findPrize","staticRenderFns","name","components","CExtendedModal","data","collapseDuration","modalConfig","show","label","mounted","method","url","methods","newLotteryInit","type","select","value","footer","header","closeModalHandler","then","deletePrize","cur","computed","component","vis","mData","on","$event","closeModal","proxy","_t","_l","field","index","$scopedSlots","boolSelect","$set","model","callback","$$v","expression","props"],"mappings":"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","file":"js/chunk-4f68bd0a.a372fac6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('CDataTable',{attrs:{\"sorter\":\"\",\"hover\":\"\",\"items\":_vm.items,\"fields\":_vm.fields,\"column-filter\":\"\"},scopedSlots:_vm._u([{key:\"prizeId\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(_vm.findPrize(item)))])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <CDataTable sorter hover :items=\"items\" :fields=\"fields\" column-filter>\n      <template #prizeId=\"{ item }\"><td>{{ findPrize(item) }}</td></template>\n    </CDataTable>\n  </div>\n\n</template>\n\n\n<script>\nimport CExtendedModal from '../components/table/CExtendedModal.vue'\n\nexport default {\n  name: 'Prizes',\n  components: {\n    CExtendedModal\n  },\n  data() {\n    return {\n      collapseDuration: 0,\n      modalConfig: {\n        show: false,\n        data: {},\n      },\n      items: [],\n      fields: [\n        { key: 'id', label: 'Id приза' },\n        { key: 'prizeId', label: 'Тип' },\n        { key: 'qr_payload', label: 'Значение' },\n      ]\n    }\n  },\n  mounted() {\n    this.$http({ method: 'GET', url: `/v1/prize-value/` }).then(e => {\n      this.items = e.data\n    })\n  },\n  methods: {\n    findPrize(item) {\n      return this.$ctable.prizes.find(e => e.value == item.prizeId).label\n    },\n    newLotteryInit() {\n      this.modalConfig.data = {\n        fields: [\n          { label: 'Дата розыгрыша', key: \"start\", type: \"date\" },\n          { label: 'Конец', key: 'end', type: \"date\" },\n          { label: 'Что разыгрываем', key: \"prize\", select: this.$ctable.prizes, value: this.$ctable.prizes[0].value },\n          { label: 'Основные победители', key: \"primaryWinners\", type: \"number\" },\n          { label: 'Запасные победители', key: \"reserveWinners\", type: \"number\" }\n        ],\n        footer: 'Создать',\n        header: 'Новый розыгрыш',\n        type: 'newLottery'\n      }\n      this.modalConfig.show = true\n    },\n    closeModalHandler() {\n      switch (this.modalConfig.data.type) {\n        case 'deletePrize': {\n          this.$http({\n            method: 'DELETE',\n            url: `/v1/prize-value/${this.modalConfig.data.cur.id}`,\n          })\n            .then(() => {\n              const idx = this.items.findIndex(i => i.id == this.modalConfig.data.cur.id)\n              this.items.splice(idx, 1)\n              this.modalConfig.show = false\n            })\n          break\n        }\n        default:\n          break;\n      }\n      // if (this.modalConfig.data.type == 'newLottery') {\n      //   const data = this.modalConfig.data.fields.reduce((s, c) => {\n      //     s[c.key] = c.value\n      //     return s\n      //   }, {})\n      //   this.$http({ method: 'POST', url: `/v1/lottery/`, data: data })\n      //     .then((r) => {\n      //       this.modalConfig.show = false\n      //       this.items.push(r.data)\n      //     })\n      // } else if (this.modalConfig.data.type == 'editLottery') {\n      //   const status_id = this.modalConfig.data.fields[0].value\n      //   this.$http({ method: 'PUT', url: `/v1/lottery/${this.modalConfig.data.cur.id}`, data: { status: status_id } })\n      //     .then(() => {\n      //       this.modalConfig.data.cur.status = this.$ctable.lottery_statuses.find(c => c.value == status_id).label\n      //     })\n      // } else if (this.modalConfig.data.type == 'deletePrize') {\n      //   this.$http({\n      //     method: 'DELETE',\n      //     url: `/v1/lottery/${this.modalConfig.data.cur.id}`,\n      //   })\n      //     .then(() => {\n      //       const idx = this.items.findIndex(i => i.id == this.modalConfig.data.cur.id)\n      //       this.items.splice(idx, 1)\n      //       this.modalConfig.show = false\n      //     })\n      // }\n    },\n    // changeLotteryStatus(item) {\n    //   this.modalConfig.data = {\n    //     cur: item,\n    //     fields: [\n    //       { key: 'status', label: 'Статус', select: this.$ctable.lottery_statuses, value: this.$ctable.lottery_statuses.find(c => c.label == item.status)?.value },\n    //     ],\n    //     footer: 'Сохранить',\n    //     header: 'Статус розыгрыша',\n    //     type: 'editLottery'\n    //   }\n    //   this.modalConfig.show = true\n    // },\n    deletePrize(item) {\n      this.modalConfig.data = {\n        cur: item,\n        fields: [],\n        footer: 'Подтвердить',\n        header: 'Удалить приз?',\n        type: 'deletePrize'\n      }\n      this.modalConfig.show = true\n    },\n  },\n  computed: {\n\n  },\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prizes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Prizes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Prizes.vue?vue&type=template&id=6e96c370&\"\nimport script from \"./Prizes.vue?vue&type=script&lang=js&\"\nexport * from \"./Prizes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CModal',{attrs:{\"show\":_vm.vis,\"title\":_vm.mData.header},on:{\"update:show\":function($event){_vm.vis=$event}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('CButton',{attrs:{\"shape\":\"square\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(_vm._s(_vm.mData.footer))])]},proxy:true}])},[_vm._t(\"content\"),_vm._l((_vm.mData.fields),function(field,index){return [(_vm.$scopedSlots[field.label])?[_vm._t(field.label,null,{\"item\":field})]:(field.select)?_c('CSelect',{key:index,attrs:{\"label\":field.label,\"value\":field.value,\"options\":field.select == 'bool' ? _vm.boolSelect : field.select},on:{\"update:value\":function($event){return _vm.$set(field, \"value\", $event)}}}):_c('CInput',{key:index,attrs:{\"label\":field.label,\"type\":field.type},model:{value:(field.value),callback:function ($$v) {_vm.$set(field, \"value\", $$v)},expression:\"field.value\"}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <CModal :show.sync=\"vis\" :title=\"mData.header\">\n    <slot name=\"content\"></slot>\n    <template v-for=\"(field, index) in mData.fields\">\n      <template v-if=\"$scopedSlots[field.label]\">\n        <slot :name=\"field.label\" :item=\"field\" />\n      </template>\n      <CSelect v-else-if=\"field.select\" :label=\"field.label\" :value.sync=\"field.value\"\n        :options=\"field.select == 'bool' ? boolSelect : field.select\" :key=\"index\" />\n      <CInput v-else :label=\"field.label\" v-model=\"field.value\" :key=\"index\" :type=\"field.type\" />\n    </template>\n    <template #footer>\n      <CButton shape=\"square\" color=\"primary\" @click=\"closeModal()\">{{ mData.footer }}</CButton>\n    </template>\n  </CModal>\n</template>\n\n<script>\nexport default {\n  name: 'ExtendedModal',\n\n  data() {\n    return {\n      boolSelect: [{\n        value: 1,\n        label: \"Да\"\n      },\n      {\n        value: 0,\n        label: \"Нет\"\n      }]\n    }\n  },\n  props: {\n    vis: Boolean,\n    mData: Object\n  },\n  methods: {\n    closeModal() {\n      this.vis = false\n      this.$emit('modal-closed')\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CExtendedModal.vue?vue&type=template&id=25ef501a&\"\nimport script from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\nexport * from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}