(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f68bd0a"],{"8c71":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("CDataTable",{attrs:{sorter:"",hover:"",items:e.items,fields:e.fields,"column-filter":""},scopedSlots:e._u([{key:"prizeId",fn:function(t){var a=t.item;return[l("td",[e._v(e._s(e.findPrize(a)))])]}}])})],1)},n=[],o=l("b33f"),i={name:"Prizes",components:{CExtendedModal:o["a"]},data:function(){return{collapseDuration:0,modalConfig:{show:!1,data:{}},items:[],fields:[{key:"id",label:"Id приза"},{key:"prizeId",label:"Тип"},{key:"qr_payload",label:"Значение"}]}},mounted:function(){var e=this;this.$http({method:"GET",url:"/v1/prize-value/"}).then((function(t){e.items=t.data}))},methods:{findPrize:function(e){return this.$ctable.prizes.find((function(t){return t.value==e.prizeId})).label},newLotteryInit:function(){this.modalConfig.data={fields:[{label:"Дата розыгрыша",key:"start",type:"date"},{label:"Конец",key:"end",type:"date"},{label:"Что разыгрываем",key:"prize",select:this.$ctable.prizes,value:this.$ctable.prizes[0].value},{label:"Основные победители",key:"primaryWinners",type:"number"},{label:"Запасные победители",key:"reserveWinners",type:"number"}],footer:"Создать",header:"Новый розыгрыш",type:"newLottery"},this.modalConfig.show=!0},closeModalHandler:function(){var e=this;switch(this.modalConfig.data.type){case"deletePrize":this.$http({method:"DELETE",url:"/v1/prize-value/".concat(this.modalConfig.data.cur.id)}).then((function(){var t=e.items.findIndex((function(t){return t.id==e.modalConfig.data.cur.id}));e.items.splice(t,1),e.modalConfig.show=!1}));break;default:break}},deletePrize:function(e){this.modalConfig.data={cur:e,fields:[],footer:"Подтвердить",header:"Удалить приз?",type:"deletePrize"},this.modalConfig.show=!0}},computed:{}},r=i,s=l("2877"),u=Object(s["a"])(r,a,n,!1,null,null,null);t["default"]=u.exports},b33f:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("CModal",{attrs:{show:e.vis,title:e.mData.header},on:{"update:show":function(t){e.vis=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[l("CButton",{attrs:{shape:"square",color:"primary"},on:{click:function(t){return e.closeModal()}}},[e._v(e._s(e.mData.footer))])]},proxy:!0}])},[e._t("content"),e._l(e.mData.fields,(function(t,a){return[e.$scopedSlots[t.label]?[e._t(t.label,null,{item:t})]:t.select?l("CSelect",{key:a,attrs:{label:t.label,value:t.value,options:"bool"==t.select?e.boolSelect:t.select},on:{"update:value":function(l){return e.$set(t,"value",l)}}}):l("CInput",{key:a,attrs:{label:t.label,type:t.type},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"field.value"}})]}))],2)},n=[],o={name:"ExtendedModal",data:function(){return{boolSelect:[{value:1,label:"Да"},{value:0,label:"Нет"}]}},props:{vis:Boolean,mData:Object},methods:{closeModal:function(){this.vis=!1,this.$emit("modal-closed")}}},i=o,r=l("2877"),s=Object(r["a"])(i,a,n,!1,null,null,null);t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-4f68bd0a.a372fac6.js.map