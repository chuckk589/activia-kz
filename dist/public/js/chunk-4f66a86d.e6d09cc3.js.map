{"version":3,"sources":["webpack:///./vue/views/Winners.vue?483a","webpack:///vue/views/Winners.vue","webpack:///./vue/views/Winners.vue?063c","webpack:///./vue/views/Winners.vue","webpack:///./vue/components/table/CExtendedModal.vue?13a1","webpack:///vue/components/table/CExtendedModal.vue","webpack:///./vue/components/table/CExtendedModal.vue?a140","webpack:///./vue/components/table/CExtendedModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","items","fields","scopedSlots","_u","key","fn","ref","item","_v","_s","primary","confirmed","notified","Date","createdAt","toLocaleString","staticClass","on","$event","sendNotify","approveWinner","staticRenderFns","name","components","CExtendedModal","data","label","filter","sorter","mounted","method","url","methods","then","component","vis","mData","header","closeModal","footer","proxy","_t","_l","field","index","$scopedSlots","value","select","boolSelect","$set","type","model","callback","$$v","expression","props"],"mappings":"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","file":"js/chunk-4f66a86d.e6d09cc3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('CDataTable',{attrs:{\"items\":_vm.items,\"fields\":_vm.fields,\"pagination\":\"\",\"itemsPerPageSelect\":\"\",\"column-filter\":\"\"},scopedSlots:_vm._u([{key:\"primary\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(item.primary?\"Да\":\"Нет\"))])]}},{key:\"confirmed\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(item.confirmed?\"Да\":\"Нет\"))])]}},{key:\"notified\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(item.notified?\"Да\":\"Нет\"))])]}},{key:\"createdAt\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(new Date(item.createdAt).toLocaleString()))])]}},{key:\"action\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_c('CDropdown',{staticClass:\"m-2\",attrs:{\"toggler-text\":\"Действия\",\"color\":\"secondary\"}},[_c('CDropdownItem',{on:{\"click\":function($event){return _vm.sendNotify(item)}}},[_vm._v(\"Уведомить о выигрыше\")]),_c('CDropdownItem',{on:{\"click\":function($event){return _vm.approveWinner(item)}}},[_vm._v(\"Подтвердить\")])],1)],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <CDataTable \n    :items=\"items\" \n    :fields = \"fields\"\n    pagination\n    itemsPerPageSelect\n     column-filter\n     >\n     <template #primary=\"{item}\"><td>{{item.primary?\"Да\":\"Нет\"}}</td></template>\n     <template #confirmed=\"{item}\"><td>{{item.confirmed?\"Да\":\"Нет\"}}</td></template>\n     <template #notified=\"{item}\"><td>{{item.notified?\"Да\":\"Нет\"}}</td></template>\n     <template #createdAt=\"{item}\"><td>{{new Date(item.createdAt).toLocaleString()}}</td></template>\n     <template #action=\"{item}\">\n      <td>\n        <CDropdown toggler-text=\"Действия\" class=\"m-2\" color=\"secondary\">\n          <CDropdownItem @click=\"sendNotify(item)\">Уведомить о выигрыше</CDropdownItem>\n          <CDropdownItem @click=\"approveWinner(item)\">Подтвердить</CDropdownItem>\n        </CDropdown>\n      </td>\n    </template>\n    </CDataTable>\n  </div>\n\n</template>\n\n\n<script>\nimport CExtendedModal from '../components/table/CExtendedModal.vue'\n\nexport default {\n  name: 'Winners',\n  components: {\n    CExtendedModal\n  },\n  data () {\n    return {\n      items: [],\n      fields:[\n        {key:'id', label:'Id'},\n        {key:'primary', label:'Основной'},\n        {key:'checkId', label:'Id чека'},\n        {key:'lotteryId', label:'Id розыгрыша'},\n        {key:'createdAt', label:'Дата выигрыша'},\n        {key:'confirmed', label:'Подтвержден'},\n        {key:'notified', label:'Уведомлен'},\n        {key:'action', label: '', filter: false, sorter: false}\n      ]\n    }\n  },\n  mounted() {\n    this.$http({method: 'GET', url: `/v1/winner/`}).then(e => {\n        //console.log(this.items.concat({id:\"2112\",chat_id:\"11\"}))\n      this.items  = e.data\n    })\n  },\n  methods:{\n    sendNotify(item){\n      this.$http({method: 'PUT', url: `/v1/winner/${item.id}/notification`}).then(e => {\n        item.notified = 1\n      })\n    },\n    approveWinner(item){\n      this.$http({method: 'PUT', url: `/v1/winner/${item.id}`, data:{\n        confirmed:1\n      }}).then(e => {\n        item.confirmed = 1\n      })\n    }\n  }, \n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Winners.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Winners.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Winners.vue?vue&type=template&id=20f0442f&\"\nimport script from \"./Winners.vue?vue&type=script&lang=js&\"\nexport * from \"./Winners.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CModal',{attrs:{\"show\":_vm.vis,\"title\":_vm.mData.header},on:{\"update:show\":function($event){_vm.vis=$event}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('CButton',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(_vm._s(_vm.mData.footer))])]},proxy:true}])},[_vm._t(\"content\"),_vm._l((_vm.mData.fields),function(field,index){return [(_vm.$scopedSlots[field.label])?[_vm._t(field.label,null,{\"item\":field})]:(field.select)?_c('CSelect',{key:index,attrs:{\"label\":field.label,\"value\":field.value,\"options\":field.select == 'bool' ? _vm.boolSelect : field.select},on:{\"update:value\":function($event){return _vm.$set(field, \"value\", $event)}}}):_c('CInput',{key:index,attrs:{\"label\":field.label,\"type\":field.type},model:{value:(field.value),callback:function ($$v) {_vm.$set(field, \"value\", $$v)},expression:\"field.value\"}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <CModal :show.sync=\"vis\" :title=\"mData.header\">\n    <slot name=\"content\"></slot>\n    <template v-for=\"(field, index) in mData.fields\">\n      <template v-if=\"$scopedSlots[field.label]\">\n        <slot :name=\"field.label\" :item=\"field\" />\n      </template>\n      <CSelect v-else-if=\"field.select\" :label=\"field.label\" :value.sync=\"field.value\"\n        :options=\"field.select == 'bool' ? boolSelect : field.select\" :key=\"index\" />\n      <CInput v-else :label=\"field.label\" v-model=\"field.value\" :key=\"index\" :type=\"field.type\" />\n    </template>\n    <template #footer>\n      <CButton color=\"primary\" @click=\"closeModal()\">{{ mData.footer }}</CButton>\n    </template>\n  </CModal>\n</template>\n\n<script>\nexport default {\n  name: 'ExtendedModal',\n\n  data() {\n    return {\n      boolSelect: [{\n        value: 1,\n        label: \"Да\"\n      },\n      {\n        value: 0,\n        label: \"Нет\"\n      }]\n    }\n  },\n  props: {\n    vis: Boolean,\n    mData: Object\n  },\n  methods: {\n    closeModal() {\n      this.vis = false\n      this.$emit('modal-closed')\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CExtendedModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CExtendedModal.vue?vue&type=template&id=94345078&\"\nimport script from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\nexport * from \"./CExtendedModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}